
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inner Weather</title>
  <style>
    body {
      font-family: 'Helvetica Neue', sans-serif;
      background: #000;
      color: #FFD700;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    body.deep {
      background: radial-gradient(circle at center, #0a0a0a, #000022);
    }

    h1 {
      font-size: 2.5em;
      margin: 1em 0 0.5em;
    }

    .slider-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px;
      gap: 10px;
    }

    .slider-box {
      background: #222;
      border-radius: 10px;
      padding: 10px;
      width: 100px;
    }

    .slider-box label {
      display: block;
      margin-bottom: 5px;
    }

    input[type="range"] {
      width: 100%;
    }

    button {
      background-color: #FFD700;
      border: none;
      padding: 10px 20px;
      margin: 10px;
      font-size: 1em;
      border-radius: 8px;
      font-weight: bold;
    }

    canvas {
      display: block;
      margin: 50px auto 30px;
      background: transparent;
    }

    #output {
      margin-top: 20px;
      font-style: italic;
      color: #ffed8b;
      font-size: 1.1em;
    }

    body.deep #output {
      color: #FFDDEE;
      text-shadow: 0 0 4px #FFDDEE;
    }

    #deepModeToggle {
      margin-bottom: 40px;
    }
  </style>
</head>
<body>
  <h1>Inner Weather</h1>
  <div class="slider-container" id="sliders"></div>

  <button onclick="generateWeather()">Generate Weather</button>
  <button onclick="resetSliders()">Reset</button>
  <br />
  <button id="deepModeToggle" onclick="toggleDeepMode()">Toggle Deep Mode</button>

  <div id="output"></div>

  <canvas id="sigilCanvas" width="400" height="400"></canvas>

  <script>
    const emotions = ["joy", "grief", "anxiety", "desire", "love", "anger", "wonder", "emptiness", "clarity", "longing", "shame", "peace"];
    const symbols = ["❤", "✴️", "❄️", "✨", "🌕", "⚡", "🌊", "☁️", "❤️‍🔥", "🌀", "🕊️", "🪐"];
    let deepMode = false;
    let selected = [];
    let pulse = 0;
    let frame = 0;

    const canvas = document.getElementById("sigilCanvas");
    const ctx = canvas.getContext("2d");
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;

    function toggleDeepMode() {
      deepMode = !deepMode;
      document.body.classList.toggle("deep");
    }

    function setupSliders() {
      const container = document.getElementById("sliders");
      emotions.forEach(emotion => {
        const box = document.createElement("div");
        box.className = "slider-box";
        box.innerHTML = \`<label>\${emotion}</label><input type="range" min="0" max="100" value="50" id="\${emotion}" />\`;
        container.appendChild(box);
      });
    }

    function generateWeather() {
      selected = emotions.filter(e => document.getElementById(e).value > 70);
      document.getElementById("output").innerText = selected.length > 0
        ? \`You are moved by \${selected.join(", ")}.\`
        : "You are still, like calm water.";
    }

    function resetSliders() {
      emotions.forEach(e => document.getElementById(e).value = 50);
      selected = [];
      document.getElementById("output").innerText = "";
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (selected.length === 0) return;

      const radiusBase = 100;
      const radiusPulse = deepMode ? radiusBase + Math.sin(pulse) * 10 : radiusBase;
      const points = [];

      for (let i = 0; i < selected.length; i++) {
        const angle = (2 * Math.PI / selected.length) * i;
        const x = centerX + radiusPulse * Math.cos(angle);
        const y = centerY + radiusPulse * Math.sin(angle);
        points.push([x, y]);
      }

      // draw sigil lines
      if (points.length > 1) {
        ctx.strokeStyle = "#FFD700";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(points[0][0], points[0][1]);
        for (let i = 1; i < points.length; i++) {
          ctx.lineTo(points[i][0], points[i][1]);
        }
        ctx.closePath();
        ctx.stroke();
      }

      // draw orb if deep mode
      if (deepMode && points.length > 1) {
        const orbIndex = frame % points.length;
        const [x, y] = points[orbIndex];
        ctx.beginPath();
        ctx.arc(x, y, 6, 0, Math.PI * 2);
        ctx.fillStyle = "#FFDDEE";
        ctx.shadowColor = "#FFDDEE";
        ctx.shadowBlur = 10;
        ctx.fill();
        ctx.shadowBlur = 0;
      }

      // draw emoji symbols
      ctx.font = "24px serif";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      for (let i = 0; i < points.length; i++) {
        const [x, y] = points[i];
        const size = deepMode ? 24 + Math.sin(frame / 10 + i) * 2 : 24;
        ctx.font = size + "px serif";
        ctx.fillStyle = "#FFD700";
        ctx.fillText(symbols[i % symbols.length], x, y);
      }

      frame++;
      pulse += 0.05;
      requestAnimationFrame(draw);
    }

    setupSliders();
    draw();
  </script>
</body>
</html>
